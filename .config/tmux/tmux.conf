set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"
set -g mouse on
set -sg escape-time 0
set -g history-limit 10000
set -g focus-events on
# Automatically renumber window numbers on closing a pane (tmux >= 1.7).
set -g renumber-windows on

# Change prefix to Ctrl+Space
set -g prefix C-Space
unbind C-b
bind C-Space send-prefix

#
# Plugins
#
set -g @resurrect-capture-pane-contents 'on'
set -g @resurrect-strategy-nvim 'session'
run-shell ~/.config/tmux/plugins/tmux-resurrect/resurrect.tmux

set -g @continuum-restore 'on'
set -g @continuum-save-interval '15'
set -g @continuum-save-uptime 'on'
run-shell ~/.config/tmux/plugins/tmux-continuum/continuum.tmux

#
# Key bindings
#
bind c new-window -c "#{pane_current_path}"
bind -n 'C-\' split-window -h -c "#{pane_current_path}"
bind -n 'C-_' split-window -v -c "#{pane_current_path}"  # Ctrl + -

# Move between panes
bind-key -n C-k select-pane -U  # up
bind-key -n C-j select-pane -D  # down
bind-key -n C-h if-shell -F "#{pane_at_left}" "select-window -p" "select-pane -L"
bind-key -n C-l if-shell -F "#{pane_at_right}" "select-window -n" "select-pane -R"

# Resize panes
unbind-key -T prefix k
bind-key -r k resize-pane -U 1
unbind-key -T prefix j
bind-key -r j resize-pane -D 1
unbind-key -T prefix h
bind-key -r h resize-pane -L 1
unbind-key -T prefix l
bind-key -r l resize-pane -R 1

# Search on pane
bind-key / command-prompt -i -p "search down" "copy-mode; send -X search-forward-incremental \"%%%\""

#
# Theme
#
set -g window-style 'bg=#1A1C29'
set -g window-active-style 'bg=#0F111A'

%hidden right_arrow_icon=''
%hidden left_arrow_icon=''
%hidden session_icon=''
%hidden time_icon=''
%hidden date_icon=''
%hidden time_format='%H:%M'
%hidden date_format='%F'

# Colors
# short for Theme-Colour
%hidden TC='#A6ACCD'

%hidden G01=#080808 #232
%hidden G02=#121212 #233
%hidden G03=#1c1c1c #234
%hidden G04=#262626 #235
%hidden G05=#303030 #236
%hidden G06=#3a3a3a #237
%hidden G07=#444444 #238
%hidden G08=#4e4e4e #239
%hidden G09=#585858 #240
%hidden G10=#626262 #241
%hidden G11=#6c6c6c #242
%hidden G12=#767676 #243

%hidden FG="$G10"
%hidden BG="#0F111A"  # $G04

# Status options
set -g status-interval 1
set -g status on

# Basic status bar colors
set -g status-fg "$FG"
set -g status-bg "$BG"

# Show prefix status
%hidden prefix_prefix_color="#{?client_prefix,#[fg=$TC],#[fg=$G04]}#[bg=$BG]"
%hidden prefix_prefix="$prefix_prefix_color$left_arrow_icon"
%hidden prefix_text_bg="#{?client_prefix,#[bg=$TC],#[bg=$G04]}"
%hidden prefix_text_color="#{?client_prefix,#[fg=$G04],#[fg=$TC]}$prefix_text_bg"
%hidden prefix_text="$prefix_text_color C-space"
%hidden prefix_status="$prefix_prefix$prefix_text"

# Show mode status
%hidden mode_prefix_color="#[fg=$G05]$prefix_text_bg"
%hidden mode_prefix="$mode_prefix_color$left_arrow_icon"
%hidden mode_text_color="#[fg=$TC,bg=$G05]"
%hidden mode_text="$mode_text_color #{?pane_in_mode,COPY,NORMAL}"
%hidden mode_status="$mode_prefix$mode_text"

# Left side of status bar
set -g status-left-style "fg=$G12,bg=$G04"
set -g status-left-length 20
%hidden LS="#[fg=$G04,bg=$TC,bold] $session_icon #S #[fg=$TC,bg=$BG,nobold]$right_arrow_icon"
set -g status-left "$LS"

# Right side of status bar
set -g status-right-style "fg=$G12,bg=$BG"
set -g status-right-length 150
%hidden RS="$prefix_status $mode_status #[fg=$G06]$left_arrow_icon#[fg=$TC,bg=$G06] $time_icon $time_format #[fg=$TC,bg=$G06]$left_arrow_icon#[fg=$G04,bg=$TC] $date_icon $date_format "
set -g status-right "$RS"

# Window status
set -g window-status-format " #I:#W "
set -g window-status-current-format "#[fg=$BG,bg=$G06]$right_arrow_icon#[fg=$TC,bold] #I:#W #[fg=$G06,bg=$BG,nobold]$right_arrow_icon"

# Window separator
set -g window-status-separator ""

# Window status alignment
set -g status-justify left

# Current window status
set -g window-status-current-style "fg=$TC,bg=$BG"

# Pane border
set -g pane-border-style "fg=$G07,bg=default"

# Active pane border
set -g pane-active-border-style "fg=green,bg=$BG"

# Pane number indicator
set -g display-panes-colour "$G07"
set -g display-panes-active-colour "$TC"

# Clock mode
set -g clock-mode-colour "$TC"
set -g clock-mode-style 24

# Message
set -g message-style "fg=$TC,bg=$BG"

# Command message
set -g message-command-style "fg=$TC,bg=$BG"

# Copy mode highlight
set -g mode-style "bg=$TC,fg=$FG"
